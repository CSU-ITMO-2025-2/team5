# ü§ñ SAN Autoresponder - —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Ç–∑—ã–≤—ã

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**SAN Autoresponder** - —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –∞–Ω–∞–ª–∏–∑–æ–º —ç–º–æ—Ü–∏–π.

–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –æ—Ç–∑—ã–≤ **"–ù–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è!!! 1 –∑–≤–µ–∑–¥–∞!!!"** –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è —Ç–æ–≤–∞—Ä–∞ **"–ú—É–ª—è–∂ IPhone 17 Pro"**, SAN Autoresponder —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤–∞—à–∏ –Ω–µ—Ä–≤—ã.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

1. **auth_service** - —Å–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **producer_service** - —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **ml_service** - —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç–º–æ—Ü–∏–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
4. **notification_service** - —Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram
5. **ui_service** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: FastAPI, Python 3.10-3.11
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL —Å SQLAlchemy ORM
- **–°–æ–æ–±—â–µ–Ω–∏—è**: Apache Kafka —Å Zookeeper
- **ML**: OpenAI API (gpt-4o-mini)
- **Frontend**: HTML, CSS, JavaScript, Bootstrap
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: Kubernetes + Helm
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus + Grafana + Loki
- **CI/CD**: GitHub Actions + ArgoCD

## üìÑ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç—Å—è - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

#### 1. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –º–∏–Ω–∏–º—É–º —Ç—Ä–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: 5 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:
- auth_service (FastAPI, PostgreSQL)
- producer_service (FastAPI, Kafka)
- ml_service (FastAPI, Kafka, OpenAI, PostgreSQL)
- notification_service (FastAPI, Kafka, Telegram)
- ui_service (FastAPI, Jinja2)

#### 2. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã –≤ Kubernetes —á–µ—Ä–µ–∑ Helm
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Kubernetes –∏ Helm:
- Helm —á–∞—Ä—Ç –≤ `team5-app-helm/`
- Values.yaml —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –¥–ª—è Kafka, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- Ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞

#### 3. –ù–∞—Å—Ç—Ä–æ–µ–Ω CI/CD –∏ GitOps-–¥–µ–ø–ª–æ–π (—á–µ—Ä–µ–∑ ArgoCD)
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**: 
- GitHub Actions workflows –≤ `.github/workflows/`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Helm values —á–µ—Ä–µ–∑ PR
- GitOps –ø–æ–¥—Ö–æ–¥: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ values.yaml ‚Üí ArgoCD —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

#### 4. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Secrets, RBAC)
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: External Secrets –¥–ª—è Vault, RBAC —á–µ—Ä–µ–∑ ServiceAccount

#### 5. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã Kafka/Zookeeper –∏ –µ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- Kafka –∫–ª–∞—Å—Ç–µ—Ä —Å 3 –Ω–æ–¥–∞–º–∏ (KRaft mode)
- –¢–æ–ø–∏–∫–∏: `raw-reviews`, `processed-reviews`
- SASL/SCRAM –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ: producer ‚Üí Kafka ‚Üí ml_service ‚Üí Kafka ‚Üí notification_service

#### 6. –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∏–Ω—Ü–∏–ø—ã –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (HPA, Circuit Breaker, autoscaling, probes)
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- **Autoscaling**: KEDA –¥–ª—è Kafka-based autoscaling, HPA
- **Probes**: Readiness –∏ Liveness probes –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **Circuit Breaker**
- **PodDisruptionBudget**
- **Multi-replica**

#### 7. –ü—Ä–æ–µ–∫—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Chaos Engineering
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- –ü–∞–π–ø–ª–∞–π–Ω –≤ Chaos Mesh

## –ö–æ–º–∞–Ω–¥–∞

–°–µ–º—ë–Ω –ú—ã–Ω–∫–æ, –ê–Ω–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞, –ù–∏–∫–∏—Ç–∞ –ì–æ—Ä–±—É–Ω–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å:
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
- –ò–º–µ–µ—Ç —Å–≤–æ—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
- –û–±—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Kafka —Å–æ–æ–±—â–µ–Ω–∏—è
- –ò–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ Docker –æ–±—Ä–∞–∑—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- SASL/SCRAM –¥–ª—è Kafka
- External Secrets –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- RBAC –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- KEDA –¥–ª—è event-driven autoscaling
- HPA –¥–ª—è CPU/memory-based scaling
- Multi-replica —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- Load balancing —á–µ—Ä–µ–∑ Kubernetes Services

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Prometheus –¥–ª—è –º–µ—Ç—Ä–∏–∫
- Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- Loki –¥–ª—è –ª–æ–≥–æ–≤
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ health check endpoints

### –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
- Circuit Breaker –ø–∞—Ç—Ç–µ—Ä–Ω
- PodDisruptionBudget
- Multi-zone —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- Graceful shutdown

## –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Docker Compose)
```bash
cd team5
docker-compose up -d
```

### –ó–∞–ø—É—Å–∫ –≤ Kubernetes
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Kafka
kubectl apply -f kafka-kraft-with-resources.yaml
kubectl apply -f kafka-topics.yaml
kubectl apply -f kafka-user.yaml

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
helm install team5 ./team5-app-helm
```

### CI/CD Pipeline
1. Push –≤ main –≤–µ—Ç–∫—É ‚Üí —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Helm values.yaml
3. –°–æ–∑–¥–∞–Ω–∏–µ PR –≤ team5-app-helm —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. ArgoCD –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

## API Endpoints

### Auth Service
- `POST /users` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /sessions` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `GET /health` - Health check

### Producer Service
- `POST /reviews` - –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–∑—ã–≤–∞ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É
- `GET /health` - Health check

### ML Service
- `GET /reviews/{review_id}` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞
- `GET /consumer/status` - –°—Ç–∞—Ç—É—Å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è Kafka
- `GET /health` - Health check

### Notification Service
- `GET /health` - Health check

### UI Service
- `GET /` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `GET /login` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `GET /dashboard` - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
- `POST /api/reviews` - API –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∑—ã–≤–æ–≤
- `GET /api/reviews/{review_id}` - API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables
- `SECRET_KEY` - JWT —Å–µ–∫—Ä–µ—Ç
- `DATABASE_URL` - PostgreSQL connection string
- `KAFKA_BOOTSTRAP_SERVERS` - Kafka endpoints
- `API_KEY` - OpenAI API key
- `TELEGRAM_BOT_TOKEN` - Telegram bot token

### Helm Values
–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `values.yaml`:
- –†–µ—Å—É—Ä—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ KEDA autoscaling
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Kafka
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- JWT —Ç–æ–∫–µ–Ω—ã —Å Argon2 —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª–µ–π
- SASL/SCRAM –¥–ª—è Kafka
- RBAC –¥–ª—è Kubernetes

### –°–µ–∫—Ä–µ—Ç—ã
- External Secrets –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Vault
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–æ–∫–æ–µ –∏ –≤ –¥–≤–∏–∂–µ–Ω–∏–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏
- Prometheus scrapes –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- Kafka JMX –º–µ—Ç—Ä–∏–∫–∏
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

### –õ–æ–≥–∏
- Loki –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- Promtail –¥–ª—è —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤
- Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê–ª–µ—Ä—Ç—ã
- Health check failures
- High latency
- Resource exhaustion

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `docker-compose up postgres kafka`
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å: `uvicorn app:app --reload`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Black –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- Pylint –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- Unit —Ç–µ—Å—Ç—ã (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

### –î–µ–ø–ª–æ–π–º–µ–Ω—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —á–µ—Ä–µ–∑ GitHub Actions
- –†—É—á–Ω–æ–π —á–µ—Ä–µ–∑ Helm: `helm upgrade --install`
